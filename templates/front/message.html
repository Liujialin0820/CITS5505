{% extends 'front/front_base.html' %}

{% block title %}
Messages
{% endblock %}

{% block main_content %}
<link rel="stylesheet" href="{{ url_for('static', filename='front/css/message.css') }}">

<div class="chat-container">
  <div class="chat-header">
    <h2>Messages</h2>
    <div class="chat-controls">
      <span id="current-target">No user selected</span>
      <button id="select-user-btn">Select User</button>
    </div>
  </div>

  <div id="user-selector" class="user-popup hidden">
    <div class="user-popup-inner">
      <h4>Select a user to chat</h4>
      <ul id="user-list"></ul>
      <button onclick="document.getElementById('user-selector').classList.add('hidden')">Close</button>
    </div>
  </div>

  <div id="chat-box" class="chat-box"></div>

  <form id="message-form" class="chat-form">
    <input id="message-input" type="text" placeholder="Type a message..." autocomplete="off" />
    <button type="submit">Send</button>
  </form>

  <div id="current-user" data-user-id="{{ current_user_id }}" style="display: none;"></div>
  <meta name="csrf-token" content="{{ csrf_token() }}">

  <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
  <script src="{{ url_for('static', filename='common/zlajax.js') }}"></script>
  <script src="{{ url_for('static', filename='front/js/message.js') }}"></script>
</div>
{% endblock %}
